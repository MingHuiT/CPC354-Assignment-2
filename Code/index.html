<!DOCTYPE html>
<html>
<head>

  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" >
  <link rel="stylesheet" href="style.css">
  <title>Rotating Square Shaded</title>

  <script id="vertex-shader" type="x-shader/x-vertex">
    attribute vec4 vNormal;
    attribute vec4 vPosition;
    varying vec3 L, N, E;

    uniform mat4 modelViewMatrix;
    uniform mat4 projectionMatrix;
    uniform vec3 theta;
    uniform vec4 lightPosition;

    void main()
    {
      vec3 angles = radians(theta);
      vec3 c = cos(angles);
      vec3 s = sin(angles);
      mat4 rx = mat4(
        1.0, 0.0, 0.0, 0.0,
        0.0, c.x, s.x, 0.0,
        0.0, -s.x, c.x, 0.0,
        0.0, 0.0, 0.0, 1.0
      );
      mat4 ry = mat4(
        c.y, 0.0, -s.y, 0.0,
        0.0, 1.0, 0.0, 0.0,
        s.y, 0.0, c.y, 0.0,
        0.0, 0.0, 0.0, 1.0
      );

      vec3 pos = (modelViewMatrix * rx * ry * vPosition).xyz;
      vec3 lightPos = (modelViewMatrix * lightPosition).xyz;

      L = normalize(lightPos - pos);
      N = normalize((modelViewMatrix * rx * ry * vNormal).xyz);
      E = -normalize(pos);

      gl_Position = projectionMatrix * modelViewMatrix * rx * ry * vPosition;
    }
  </script>

  <script id="fragment-shader" type="x-shader/x-fragment">
    precision mediump float;
    varying vec3 L, N, E;

    uniform vec4 ambientProduct;
    uniform vec4 diffuseProduct;
    uniform vec4 specularProduct;
    uniform float shininess;

    void main()
    {
      vec4 diffuse = max(dot(L, N), 0.0) * diffuseProduct;
      vec3 H = normalize(L+E);
      vec4 specular = pow(max(dot(N, H), 0.0), shininess) * specularProduct;

      if (dot(L, N) < 0.0)
        specular = vec4(0.0, 0.0, 0.0, 1.0);

      vec4 fColor = ambientProduct + diffuse + specular;
      fColor.a = 1.0;

      gl_FragColor = fColor;
    }
  </script>

  <script type="text/javascript" src="Common/webgl-utils.js"></script>
  <script type="text/javascript" src="Common/initShaders.js"></script>
  <script type="text/javascript" src="Common/MV.js"></script>
  <script type="text/javascript" src="vecMat.js"></script>
  <script type="text/javascript" src="geometry.js"></script>
  <script type="text/javascript" src="geometry2.js"></script>
  <script type="text/javascript" src="cube.js"></script>
  <script type="text/javascript" src="cylinder.js"></script>
  <script type="text/javascript" src="sphere.js"></script>
  <script type="text/javascript" src="teapot.js"></script>
  <script type="text/javascript" src="index.js"></script>

</head>

  <body>
    <h1 style="text-align: center;">CPC354 Assignment 2 - Lightning and Shading</h1>
    <div style="text-align: center;">
      <canvas id="gl-canvas" width="512" height="512">
        <!-- The following message is displayed if the browser doesn’t support HTML5 -->
        Sorry; your web browser does not support HTML5’s canvas element.
      </canvas>
    </div>

    <div class="control-panel">
      <div class="object-selection">
            <label for="object">Choose an object: </label>
            <select name="object" id="object">
                <option value="cube">Cube</option>
                <option value="cylinder">Cylinder</option>
                <option value="sphere">Sphere</option>
                <option value="teapot">Teapot</option>
            </select>
      </div>

      <div>
        <input type="color" id="light_diffuse"></input>
        <label>Diffuse Light </label>
        <br>
        <input type="color" id="light_ambient"></input>
        <label>Ambient Light</label>
        <br>
        <input type="color" id="light_specular"></input>
        <label>Specular Light</label>
        <br>
      </div>

      <div>
        <button id="light_type">Change Light Type</button>
        <button id="on_off">Turn On or Off</button>
      </div>

      <div>
        <input type="range" id="light_X" min="0" max="1" step="0.001">Light Position X value</input>
        <br>
        <input type="range" id="light_Y" min="0" max="1" step="0.001">Light Position Y value</input>
        <br>
        <input type="range" id="light_Z" min="0" max="1" step="0.001">Light Position Z value</input>
      </div>

      <div>
        <input type="color" id="material_diffuse"></input>
        <label>Diffuse Material </label>
        <br>
        <input type="color" id="material_ambient"></input>
        <label>Ambient Material</label>
        <br>
        <input type="color" id="material_specular"></input>
        <label>Specular Material</label>
        <br>
      </div>
      
      <div>
        <input type="range" id="coe_material_diffuse" min="0" max="1" step="0.001">Coefficient Diffuse Material</input>
        <br>
        <input type="range" id="coe_material_ambient" min="0" max="1" step="0.001">Coefficient Ambient Material</input>
        <br>
        <input type="range" id="coe_material_specular" min="0" max="1" step="0.001">Coefficient Specular Material</input>
      </div>

      <div>
        <input type="range" id="material_shininess">Material Shininess</input>
      </div>
    </div>

  </body>

</html>